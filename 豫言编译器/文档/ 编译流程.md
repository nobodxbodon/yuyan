
编译会经过以下步骤

抽象语法表达式与结构表达式

经过：抽语法分析

得到：近似表达式

经过：文件结构检查

得到：原始表达式

经过：结构转换

得到：结构表达式

之后：

(1) 带类型编译（非常慢，暂时不用）
经过：类型标注

得到：带类型标注的结构表达式

经过：带类型求值正则变换

得到：带类型求值正则表达式（ANF正则式）

经过：带类型闭包转换

得到：带类型闭包后表达式

经过：代码生成

得到：目标平台代码

(2) 不带类型编译（非常慢，暂时不用）
模式匹配转换

得到：结构表达式，模式匹配正则形式

经过：类型擦除

得到：不带类型标注的结构表达式

经过：求值正则变换

得到：求值正则表达式（ANF正则式）

经过：闭包转换

得到：闭包后表达式

经过：代码生成

得到：目标平台代码